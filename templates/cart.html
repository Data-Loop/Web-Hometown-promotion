{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cart.css') }}">
{% endblock %}

{% block content %}
<div class="cart-container">
    <h1 class="page-title">æˆ‘çš„è´­ç‰©è½¦</h1>

    {% if cart_items %}
    <div class="cart-content">
        <div class="cart-items">
            <div class="cart-header">
                <label class="select-all">
                    <input type="checkbox" id="selectAll">
                    <span>å…¨é€‰</span>
                </label>
                <span class="header-product">å•†å“ä¿¡æ¯</span>
                <span class="header-price">å•ä»·</span>
                <span class="header-quantity">æ•°é‡</span>
                <span class="header-total">å°è®¡</span>
                <span class="header-action">æ“ä½œ</span>
            </div>

            {% for item in cart_items %}
            <div class="cart-item" data-product-id="{{ item.product_id }}">
                <div class="item-select">
                    <input type="checkbox" class="item-checkbox" checked>
                </div>
                <img src="{{ url_for('static', filename='images/products/' + item.image_url) }}" alt="{{ item.name }}">
                <div class="item-info">
                    <h3>{{ item.name }}</h3>
                    <p class="price">ï¿¥{{ "%.2f"|format(item.price) }}</p>
                </div>
                <div class="quantity">
                    <button class="quantity-btn minus" data-product-id="{{ item.product_id }}">-</button>
                    <span class="quantity-value">{{ item.quantity }}</span>
                    <button class="quantity-btn plus" data-product-id="{{ item.product_id }}">+</button>
                </div>
                <div class="subtotal">ï¿¥{{ "%.2f"|format(item.subtotal) }}</div>
                <button class="remove-btn" data-product-id="{{ item.product_id }}">åˆ é™¤</button>
            </div>
            {% endfor %}
        </div>

        <div class="cart-footer">
            <div class="select-all">
                <input type="checkbox" id="select-all" checked>
                <label for="select-all">å…¨é€‰</label>
            </div>
            <div class="total">
                æ€»è®¡ï¼š<span id="cart-total">ï¿¥{{ "%.2f"|format(total) }}</span>
            </div>
            <button class="checkout-btn" onclick="showCheckoutModal()">ç»“ç®—</button>
        </div>
    </div>
    {% else %}
    <div class="empty-cart">
        <div class="empty-icon">ğŸ›’</div>
        <p>è´­ç‰©è½¦æ˜¯ç©ºçš„</p>
        <a href="{{ url_for('products') }}" class="go-shopping">å»è´­ç‰©</a>
    </div>
    {% endif %}
</div>

<!-- ç»“ç®—æ¨¡æ€æ¡† -->
<div id="checkoutModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>ç¡®è®¤è®¢å•</h2>
        <div class="order-summary">
            <h3>è®¢å•å•†å“</h3>
            <div class="selected-items">
                <!-- è¿™é‡Œä¼šé€šè¿‡ JavaScript åŠ¨æ€å¡«å……é€‰ä¸­çš„å•†å“ -->
            </div>
            <div class="order-total">
                æ€»è®¡ï¼š<span id="modal-total">ï¿¥0.00</span>
            </div>
        </div>
        <div class="shipping-info">
            <h3>æ”¶è´§ä¿¡æ¯</h3>
            <form id="checkoutForm">
                <div class="form-group">
                    <label for="receiver">æ”¶è´§äºº</label>
                    <input type="text" id="receiver" name="receiver" required>
                </div>
                <div class="form-group">
                    <label for="phone">è”ç³»ç”µè¯</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="address">æ”¶è´§åœ°å€</label>
                    <textarea id="address" name="address" required></textarea>
                </div>
                <div class="form-group">
                    <label for="note">å¤‡æ³¨</label>
                    <textarea id="note" name="note"></textarea>
                </div>
                <button type="submit" class="submit-order">æäº¤è®¢å•</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/cart.js') }}"></script>
{% endblock %}
